<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <title>Th·ªùi kh√≥a bi·ªÉu</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- FullCalendar -->
    <link
      href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

    <!-- Date Picker (Flatpickr) -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <!-- Link icon -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <style>
      body {
        background-color: #f0f3fa;
      }
      #calendar {
        max-width: 75%;
        background: #fff;
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .calendar-container {
        display: flex;
        gap: 20px;
      }
      #datepicker {
        max-width: 250px;
      }
      .fc-toolbar-title {
        font-size: 1.25rem;
        font-weight: bold;
      }
      .fc-timegrid-slot-label {
        font-size: 0.85rem;
      }
      .fc-event {
        font-size: 0.75rem;
        padding: 2px;
      }
    </style>
  </head>
  <body>
    <div class="container mt-4">
      <h5 class="mb-4">üìÖ L·ªãch c√° nh√¢n</h5>
      <div class="calendar-container">
        <!-- L·ªãch ch√≠nh -->
        <div id="calendar"></div>

        <!-- L·ªãch nh·ªè -->
        <div id="datepicker" class="card p-3 shadow-sm">
          <div id="calendarPicker"></div>
          <!-- ch·ªâ ƒë·ªÉ hi·ªán l·ªãch -->
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var calendarEl = document.getElementById("calendar");

        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: "timeGridWeek",
          locale: "vi", // Ti·∫øng Vi·ªát
          slotMinTime: "06:00:00",
          slotMaxTime: "22:00:00",
          headerToolbar: false, // <-- ·∫©n to√†n b·ªô header
          allDaySlot: false,
          firstDay: 0, // Ch·ªß nh·∫≠t l√† ng√†y ƒë·∫ßu tu·∫ßn
          height: "auto",
          dayHeaderContent: function (arg) {
            // L·∫•y ng√†y/th√°ng/nƒÉm
            let date = arg.date;
            let d = String(date.getDate()).padStart(2, "0");
            let m = String(date.getMonth() + 1).padStart(2, "0");
            let y = date.getFullYear();

            // L·∫•y th·ª© (theo ng√¥n ng·ªØ VN)
            let weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
            let thu = weekdays[date.getDay()];

            // Tr·∫£ v·ªÅ custom HTML
            return {
              html: `<div style="text-align:center">
               <div>${d}/${m}/${y}</div>
               <small>${thu}</small>
             </div>`,
            };
          },
          expandRows: true,
          slotLabelFormat: {
            hour: "2-digit",
            minute: "2-digit",
            hour12: false,
          },
          events: [
            {
              title:
                "Ph√¢n t√≠ch & thi·∫øt k·∫ø h·ªá th·ªëng\nTi·∫øt 1-2\nPh√≤ng A6-07\nGV: C√¥ Mai",
              start: "2025-09-08T06:45:00",
              end: "2025-09-08T09:25:00",
              color: "#1e88e5",
            },
            {
              title:
                "Ph√¢n t√≠ch & thi·∫øt k·∫ø h·ªá th·ªëng\nTi·∫øt 1-2\nPh√≤ng A6-07\nGV: C√¥ Mai",
              start: "2025-09-09T06:45:00",
              end: "2025-09-09T09:25:00",
              color: "#1e88e5",
            },
            {
              title: "An to√†n & b·∫£o m·∫≠t\nTi·∫øt 1-2\nPh√≤ng A8-104\nGV: Th·∫ßy Ng·ªØ",
              start: "2025-09-10T06:45:00",
              end: "2025-09-10T09:25:00",
              color: "#fb8c00",
            },
            {
              title: "ƒêi·ªán to√°n ƒë√°m m√¢y\nTi·∫øt 1-2\nPh√≤ng A6-02\nGV: Th·∫ßy Ph·∫°m",
              start: "2025-09-11T06:45:00",
              end: "2025-09-11T09:25:00",
              color: "#e53935",
            },
            {
              title: "Ti·∫øng Anh 2\nTi·∫øt 7-8\nPh√≤ng A2-201\nGV: C√¥ H·∫±ng",
              start: "2025-09-08T13:00:00",
              end: "2025-09-08T14:40:00",
              color: "#43a047",
            },
            {
              title: "Ti·∫øng Anh 2\nTi·∫øt 7-8\nPh√≤ng A2-201\nGV: C√¥ H·∫±ng",
              start: "2025-09-09T13:00:00",
              end: "2025-09-09T14:40:00",
              color: "#43a047",
            },
          ],
        });

        calendar.render();

        let axisTop = document.querySelector(".fc-timegrid-axis-frame");
        if (axisTop) {
          axisTop.innerHTML =
            `
    <div style="display:flex; flex-direction:column; align-items:center; font-size:12px; margin-bottom:4px;">
      <i class="fa-thin fa-clock"></i>
      <span>GMT+7</span>
    </div>
  ` + axisTop.innerHTML;
        }

        // Date Picker ƒë·ªìng b·ªô v·ªõi calendar
        flatpickr("#calendarPicker", {
          inline: true,
          locale: "vn",
          onChange: function (selectedDates) {
            if (selectedDates.length > 0) {
              calendar.gotoDate(selectedDates[0]);
            }
          },
        });
      });
    </script>
  </body>
</html>
